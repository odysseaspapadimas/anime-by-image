(this["webpackJsonpanime-by-image"]=this["webpackJsonpanime-by-image"]||[]).push([[0],{12:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEdUExURS5RomF8ufz9/q272lRxs/f4+////8vT6Dlbp32TxbjE3+Hm8vr7/e7x9zFTo2V/ul55uGJ8uXSLwTtbqDVXpZeo0fT2+mV+uvL0+UdmrS9Sor7J4kZlrdfe7am42c7W6ZCizTtcqODl8e7w98zV6LnF4GN+uqy62pip0TJUpKCw1cjR5snS58rT58vU6FVys/Dy+ERjrPz8/rXB3oaayU9ssIuey66828zU6LG+3GR+uneOwjJVpN/k8TxdqMfR5u/y+Etpr8HL4z5eqVx3tqi32Ozv9uXp84SZyPb3+zBTo1Vxs1p2tq+821t2tpus0155t6u52ejs9X6TxcDL4/v8/Yqey1l1tWeBvDxcqEporomdyt3j8Dhap5ys0x9BpC4AAAAJcEhZcwAADsMAAA7DAcdvqGQAAAFiSURBVFhH7ZNnU8JAEIbXqGeJolGCGgtGsVDE3hWsWGJv2P//z3B375wQyQw3ftKZez5k3y3zwJABDAaDwfAHabKQZplbWoUQbTJDe0en3YW96E4A9FDoVZsoDq1EH8V+m6IUJN0UL4gBDcHgEIA3zJEFI6OcJWMaApFOwLhMJPAnOE6mM8SUjkC405YMJJjhNJuFXL4wV5zXElgLKqBgcYnCMm6LFJzGAv61VUXBCjeruNUVrNH7E2J9Ax8o2KTGziIZShqCrW16FnaUIE9diI4AckLslkAJ+HNDtASJ8t4+fAsOaBaiJYDDI2yU4BhLxSVOaKsnYJTgFMvZOQ1038IPQUCzCxpEBJf8pa74MiRO4FWwXtMgIpDc8GVInABusd5lMdQLUjSuJVbAw3sM9YIHPqzBdxBfNQHmAKuH/8bHJwzVZ6QE8EJXzCsfNuRNvFdV/B0fn0mVDAaDwfAPAPgCTM8rgym6oj8AAAAASUVORK5CYII="},13:function(e,t,a){e.exports=a(28)},19:function(e,t,a){},28:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(5),o=a.n(r),i=a(2),l=a.n(i),u=a(4),s=a(3),m=(a(19),a(11)),d=a.n(m),f=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://trace.moe/api/search",{method:"POST",body:JSON.stringify({image:t.toDataURL("image/jpeg",.8)}),headers:{"Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return console.log(e),e}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=a(6),v=a(7);var b=function(e){var t,a,r=Object(n.useState)(null),o=Object(s.a)(r,2),i=o[0],m=o[1],b=Object(n.useState)({}),A=Object(s.a)(b,2),h=A[0],E=A[1],j=Object(n.useState)(),y=Object(s.a)(j,2),O=y[0],g=y[1],S=Object(n.useState)(!0),w=Object(s.a)(S,2),U=w[0],k=w[1],J=Object(n.useState)(!1),x=Object(s.a)(J,2),q=x[0],C=x[1];Object(n.useEffect)((function(){var e=h.anilist_id,t=h.filename,a=h.at,n=h.tokenthumb;if(void 0!==e){var c="https://media.trace.moe/video/".concat(e,"/").concat(encodeURIComponent(t),"?t=").concat(a,"&token=").concat(n);g(c);var r=document.querySelector("video");document.querySelector(".video-container").style.display="block",document.querySelector("canvas").style.display="none";document.querySelector(".mute-btn").style.display="block",document.querySelector(".restart-btn").style.display="block";r.muted=!0;var o=r.play();void 0!==o&&o.then((function(){})).catch((function(e){}))}}),[O,h]),Object(n.useEffect)((function(){var e=h.anilist_id,t=h.filename,a=h.at,n=h.tokenthumb;if(void 0!==e){var c="https://trace.moe/thumbnail.php?anilist_id=".concat(e,"&file=").concat(encodeURIComponent(t),"&t=").concat(a,"&token=").concat(n);m(c)}}),[i,h]);var N=function(){var t=Object(u.a)(l.a.mark((function t(){var n,c,r,o,i,u,s,d,p,v,b;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return C(!0),a=document.querySelector("canvas"),t.next=4,f(a);case 4:n=t.sent,C(!1),c=n.docs[0],r=c.title_romaji,o=c.episode,i=c.anilist_id,u=c.filename,s=c.similarity,d=c.at,p=c.from,v=c.tokenthumb,b=c.mal_id,console.log(n.docs[0]),E({title_romaji:r,anilist_id:i,at:d,filename:u,similarity:s,tokenthumb:v,mal_id:b}),e.onFetch({title_romaji:r,episode:o,anilist_id:i,at:d,from:p,filename:u,similarity:s,tokenthumb:v,mal_id:b}),m();case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=document.querySelector("video");U?(e.muted=!1,k(!1)):(e.muted=!0,k(!0))},D=function(){var e=document.querySelector("video");e.currentTime=0,e.play()};return c.a.createElement("div",{className:"upload-container"},c.a.createElement("div",{className:"preview",style:{}},c.a.createElement("canvas",{ref:t}),c.a.createElement("div",{className:"video-container"},c.a.createElement("video",{src:"".concat(O)}),U?c.a.createElement(p.a,{icon:v.b,onClick:I,className:"mute-btn"}):c.a.createElement(p.a,{icon:v.c,onClick:I,className:"mute-btn"}),c.a.createElement(p.a,{icon:v.a,onClick:D,className:"restart-btn"}),c.a.createElement("button",{onClick:D,className:"restart-btn"},"Restart"))),c.a.createElement("br",null),c.a.createElement("img",{className:"image",src:"".concat(i),alt:"",style:{display:"none"}}),c.a.createElement(d.a,{singleImage:!0,withLabel:!1,withIcon:!1,buttonText:"Upload image",onChange:function(e){m(URL.createObjectURL(e[0]));var n=setInterval((function(){var e=document.querySelector(".image"),c=document.querySelector(".preview");c.width=e.naturalWidth,c.height=e.naturalHeight,(a=document.querySelector("canvas")).width=e.naturalWidth,a.height=e.naturalHeight,(t=a.getContext("2d")).drawImage(e,0,0,a.width,a.height),clearInterval(n)}),50)}}),c.a.createElement("button",{className:"search",onClick:N},q?c.a.createElement("div",{className:"lds-default"},c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null),c.a.createElement("div",null)):"Search"))},A=function(){var e=Object(u.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log(t),void 0===t){e.next=6;break}return console.log("hoo"),e.next=5,fetch("https://api.jikan.moe/v3/anime/".concat(t)).then((function(e){return e.json()})).then((function(e){return console.log(e),e}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=a(12),E=a.n(h);var j=function(){var e=Object(n.useState)({}),t=Object(s.a)(e,2),a=t[0],r=t[1],o=Object(n.useState)({}),i=Object(s.a)(o,2),m=i[0],d=i[1],f=Object(n.useState)(""),p=Object(s.a)(f,2),v=p[0],h=p[1],j=Object(n.useState)(!1),y=Object(s.a)(j,2),O=y[0],g=y[1],S=Object(n.useState)(""),w=Object(s.a)(S,2),U=w[0],k=w[1];Object(n.useEffect)((function(){function e(){return(e=Object(u.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A(a.mal_id);case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}J.current?(!function(){e.apply(this,arguments)}(),g(!0)):J.current=!0;var t=Math.floor(a.from)-7,n=Math.floor(t/60),c=t%60;c<10&&(c="0".concat(c)),k("".concat(n,":").concat(c))}),[a]);var J=Object(n.useRef)(!1);return Object(n.useEffect)((function(){console.log(J.current,"\u03b7\u03b9")})),Object(n.useEffect)((function(){m&&h(m.url)}),[m]),c.a.createElement("div",{className:"App"},c.a.createElement("h1",null,"Upload an image to find the sauce"," ",c.a.createElement("span",{role:"img","aria-label":"sauce"},"\ud83e\udd6b")," "),c.a.createElement(b,{onFetch:function(e){r(e)}}),c.a.createElement("p",{className:"result"},O&&"Anime: ".concat(a.title_romaji," - Episode: ").concat(a.episode," - Timestamp: ").concat(U)),O&&c.a.createElement("a",{href:v,target:"_blank",rel:"noopener noreferrer"},c.a.createElement("img",{src:E.a,alt:""})))};o.a.render(c.a.createElement(j,null),document.getElementById("root"))}},[[13,1,2]]]);
//# sourceMappingURL=main.936ce090.chunk.js.map